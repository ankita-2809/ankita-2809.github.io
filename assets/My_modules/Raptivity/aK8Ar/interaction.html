<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<link type="text/css" rel="stylesheet" href="css/jquery.mCustomScrollbar.css">
	<link type="text/css" rel="stylesheet" href="css/style.css">
	<link type="text/css" rel="stylesheet" href="css/effects.css">
	<link type="text/css" rel="stylesheet" href="css/mobile-style.css">
	<link type="text/css" rel="stylesheet" href="css/transcript-style.css">
	<link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.css">
	<link type="text/css" rel="stylesheet" href="js/owlcarousel/assets/owl.carousel.min.css">
	<link href="https://fonts.googleapis.com/css?family=Montserrat:400,600,700,800&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="./css/font.css" type="text/css" />
	<link rel="stylesheet" type="text/css"
		href="https://raptivity2020-prod.s3-us-west-2.amazonaws.com/harbinger/assets/fonts/defaultFont.css" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Layered Display</title>
	<script src="js/jquery.min.js"></script>
	<script src="js/interaction.js"></script>
	<!-- componentsLogic -->
  <script type="text/javascript" src="https://raptivity2020-prod.s3-us-west-2.amazonaws.com/harbinger/interaction-component/globleSettingSection/windowResize.js"></script>
</head>

<body class="pace-done pace-done" id="interactionBody"
	onunload="javascript:if(typeof trackProgress === 'boolean')unloadPage();">
	<div id="wrapper">
		<div class="title-interaction" tabindex='2'></div>
		<div class="inner-content on-top-div">
			<nav>
				<ul id="interactionTopicList" class="nav"></ul>
			</nav>
		</div>
	</div>

	<div id="wrapper-body">
		<div class="watermark-block" style="display: none;">
			<img src="images/Watermark Logo.png" />
		</div>
		<div class="sound-on-off">
			<!-- <img class="speaker-icon speaker-on" onclick="audioPause()" src="images/speaker_on.svg">
			<img class="speaker-icon speaker-off" onclick="audioPlay()" src="images/speaker_off.svg"> -->
		</div>

		<div id="interaction-audio" class="interaction-audio"></div>


		<div class="effects-top">
			<div class="hide-element"></div>
			<div class="top-layer"></div>
			<div class="top-layer top-layer--2"></div>
			<div class="top-layer top-layer--3"></div>
			<div class="top-layer top-layer--4"></div>
			<div class="top-layer top-layer--5"></div>
			<div class="bottom-layer"></div>
			<div class="bottom-layer bottom-layer--2"></div>
			<div class="bottom-layer bottom-layer--3"></div>
			<div class="bottom-layer bottom-layer--4"></div>
			<div class="bottom-layer bottom-layer--5"></div>
			<div class="left-layer"></div>
			<div class="left-layer left-layer--2"></div>
			<div class="left-layer left-layer--3"></div>
			<div class="left-layer left-layer--4"></div>
			<div class="right-layer"></div>
			<div class="right-layer right-layer--2"></div>
			<div class="right-layer right-layer--3"></div>
		</div>


		<div class="section3">
			<!-- <div class="parallax-window" style="background-image:url('');"></div> -->
			<div class="parallax-window">
				<div class="slider">
					<div id="interactionOverlay" class="overlay"></div>
					<input name="control" id="pagedefault" class="test" type="radio" />
				</div>
				<div id="owl-carousel" class="hero-slider content-panel owl-carousel" style="display: none;"></div>
			</div>
			<p class="intro-discription" style="display: none;" tabindex='2'></p>
			<a class="back-to-top" href="javascript:void(0);" style="display: none;" tabindex='5'>Back to Top</a>
		</div>

	</div>


	<script type="text/javascript">
		if (interactionJSON.audioModeType === "auto") {
			var soundOn = $(document.createElement("img"));
			soundOn.attr("src", "images/speaker_off.svg");
			soundOn.attr("class", "speaker-icon speaker-off");
			soundOn.attr("onclick", "audioPlay()");
			if (interactionJSON.textConstant && interactionJSON.textConstant.AltText && interactionJSON.textConstant.AltText.AudioOff) {
				soundOn.attr({
					'alt': interactionJSON.textConstant.AltText.AudioOff,
				});
			}
			var soundOff = $(document.createElement("img"));
			soundOff.attr("src", "images/speaker_on.svg");
			soundOff.attr("class", "speaker-icon speaker-on");
			soundOff.attr("onclick", "audioPause()");
			if (interactionJSON.textConstant && interactionJSON.textConstant.AltText && interactionJSON.textConstant.AltText.AudioOn) {
				soundOff.attr({
					'alt': interactionJSON.textConstant.AltText.AudioOn,
				});
			}
		} else if (interactionJSON.audioModeType === "manual") {
			var soundOn = $(document.createElement("img"));
			soundOn.attr("src", "images/speaker_off.svg");
			soundOn.attr("class", "speaker-icon speaker-on");
			soundOn.attr("onclick", "audioPlay()");
			if (interactionJSON.textConstant && interactionJSON.textConstant.AltText && interactionJSON.textConstant.AltText.AudioOff) {
				soundOn.attr({
					'alt': interactionJSON.textConstant.AltText.AudioOff,
				});
			}
			var soundOff = $(document.createElement("img"));
			soundOff.attr("src", "images/speaker_on.svg");
			soundOff.attr("class", "speaker-icon speaker-off");
			soundOff.attr("onclick", "audioPause()");
			if (interactionJSON.textConstant && interactionJSON.textConstant.AltText && interactionJSON.textConstant.AltText.AudioOn) {
				soundOff.attr({
					'alt': interactionJSON.textConstant.AltText.AudioOn,
				});
			}
		}

		$(".sound-on-off").append(soundOn);
		$(".sound-on-off").append(soundOff);

		function tabbingEvent(element, event) {
			$('#intro-discription').attr('tabindex', '-1')
			$('#owl-carousel .owl-item').find('img').attr('tabindex', '-1');
			$('#owl-carousel .owl-item').find('a').attr('tabindex', '-1');
			$('#owl-carousel .owl-item').find('.text-content-added').attr('tabindex', '-1');
			$('#owl-carousel .owl-item').find('.existing-iframe-example').attr('tabindex', '-1');
			$('#owl-carousel .owl-item').find('video').attr('tabindex', '-1');
			$('.slider').find('.slider--el').attr('tabindex', '-1');
			$(event.target).attr('tabindex', '4');
			$(event.target).prevAll().attr('tabindex', '3');
			$(event.target).nextAll().attr('tabindex', '6');
			const currentSlideIndex = $(event.target).attr('onclick');
			element.click();
			if ($(".speaker-on").is(":visible")) {
				$(".speaker-on").focus();
				$(".speaker-off").removeAttr('tabindex');
				$(".speaker-on").attr('tabindex', '5');
			}
			if ($(".speaker-off").is(":visible")) {
				$(".speaker-off").focus();
				$(".speaker-on").removeAttr('tabindex');
				$(".speaker-off").attr('tabindex', '5');
			}
			var key = $(element).attr('slide_no');
			setTimeout(function () {
				$('#owl-carousel .owl-item.active').find('img').attr('tabindex', '5');
				$('#owl-carousel .owl-item.active').find('a').attr('tabindex', '5');
				$('#owl-carousel .owl-item.active').find('.text-content-added').attr('tabindex', '5');
				$('#owl-carousel .owl-item.active').find('.existing-iframe-example').attr('tabindex', '5');
				$('#owl-carousel .owl-item.active').find('video').attr('tabindex', '5');
				$('.slider').find('.slider--el[sliderno=' + key + ']').attr('tabindex', '5')
			}, 1500)
		}

		function attachKeyClick(element) {
			element.addEventListener("keyup", function (event) {
				if (event.keyCode === 13 || event.keyCode === 32) {
					event.preventDefault();
					tabbingEvent(element, event);
				}
			});
			element.addEventListener("click", function (event) {
				event.preventDefault();
				tabbingEvent(element, event);
			});
		}

		// console.log('ObjectConsole'+JSON.stringify(interactionJSON))
		if (interactionJSON.userType === 'Free Trial') {
			$('.watermark-block').show()
		}
		function playPauseAudio() {
			$('.owl-item.active audio').each(function () {
				if (status == false || this.paused && pausedNot == true) {
					this.play();
					status = true;
				} else {
					this.pause();
					status = false;
				}
			});
		}

		console.log(interactionJSON.introductionTitle)
		$('.title-interaction').append(interactionJSON.introductionTitle);
		if (interactionJSON.introDiscription) {
			$('.intro-discription').show();
			$('.intro-discription').css('background', interactionJSON.introductionOverlayColor);
			$('.section3').addClass('pb-50');
		}
		$('.intro-discription').append(interactionJSON.introDiscription);
		$('head').append('<style>h4{font-family:' + interactionJSON.selectedFontFamily + ';font-size:' + interactionJSON.selectedFontSize + 'px;color:' + interactionJSON.seletedFontTextColor + '}</style>')
		if (interactionJSON) {
			var slideNumber = 1;
			if (interactionJSON.acrossAllAudioChecked === true) {
				var audio = $(document.createElement('audio'));
				audio.attr('id', 'start');
				audio.attr(
					{ 'class': 'active', 'loop': 'true' }
				);

				var source = $(document.createElement('source'));
				source.attr('src', interactionJSON.interactionAudio);
				if (interactionJSON.interactionAudio.toLowerCase().indexOf('.mp3') !== -1) {
					source.attr('type', 'audio/mp3');
				} else if (interactionJSON.interactionAudio.toLowerCase().indexOf('.ogg') !== -1) {
					source.attr('type', 'audio/ogg');
				}

				audio.append(source);
				$('#interaction-audio').append(audio);
			}

			var centerTopicIndex = parseInt(interactionJSON.interactionData.length / 2) - (interactionJSON.interactionData.length % 2);

			$('#interactionOverlay').css('background', interactionJSON.interactionOverlayColor);

			var sliderLength = interactionJSON.interactionData
			var pageNumber = 0;
			for (var i = 0; i < sliderLength.length; i++) {
				$('.slider').append('<input name="control" id="page' + pageNumber + '" class="test" type="radio"/>')
				pageNumber = pageNumber + 1;
			}
			$('.slider input').first().addClass('checked');
			$('.slider input:first').first().attr('checked', true)
			var sliderZero = $(document.createElement('div'));
			sliderZero.attr({
				'class': 'slider--el slider--el-default anim-5parts bg-image-default',
				'aria-label': interactionJSON.topicBackgroundImageAltText,
			})
			var sliderZeroInner = $(document.createElement('div'));
			sliderZeroInner.attr('class', 'slider--el-bg')
			sliderZeroInner.append(`<div class="part part-1"></div>
							<div class="part part-2"></div>
							<div class="part part-3"></div>
							<div class="part part-4"></div>
							<div class="part part-5"></div>`)
			sliderZero.append(sliderZeroInner)
			$('.slider').append(sliderZero)

			if (interactionJSON.introductionBackgroundType === 'Image') {
				$('head').append('<style>.slider--el.anim-5parts.bg-image-default .part:before { background-image: url(' + interactionJSON.topicShapeBackgroundContent + ') }</style>');
				$('.bg-image-default').attr('aria-label', interactionJSON.topicBackgroundImageAltText)
			} else if (interactionJSON.introductionBackgroundType === 'Color') {
				$('head').append('<style>.slider--el.anim-5parts.bg-image-default .part:before { background:' + interactionJSON.topicShapeBackgroundContent + '}</style>');
			}

			var keyValue = 0;
			$.each(interactionJSON.interactionData, function (key, interactionSlideData) {
				keyValue = key;
				if (
					key % 2 == 0
				) {
					var sliderOdd = $(document.createElement('div'));
					sliderOdd.attr({
						'class': 'slider--el slider--el-' + key + ' anim-9parts bg-image-' + key + '',
						'aria-label': interactionSlideData.backgroundImageAltText,
					})
					sliderOdd.attr('sliderNo', key);
					// sliderOdd.attr('aria-label', 'odd');
					var sliderOddInner = $(document.createElement('div'));
					sliderOddInner.attr('class', 'slider--el-bg')
					sliderOddInner.append(`<div class="part left-top"></div><div class="part mid-top"></div><div class="part right-top"></div><div class="part left-mid"></div><div class="part mid-mid"></div>
							<div class="part right-mid"></div>
							<div class="part left-bot"></div>
							<div class="part mid-bot"></div>
							<div class="part right-bot"></div>`)

					sliderOdd.append(sliderOddInner)
					$('.slider').append(sliderOdd)
				} else {
					var sliderEven = $(document.createElement('div'));
					sliderEven.attr({
						'class': 'slider--el slider--el-' + key + ' anim-5parts bg-image-' + key + '',
						'aria-label': interactionSlideData.backgroundImageAltText,
					})
					sliderEven.attr('sliderNo', key);
					// sliderEven.attr('aria-label', 'even');
					var sliderEvenInner = $(document.createElement('div'));
					sliderEvenInner.attr('class', 'slider--el-bg')
					sliderEvenInner.append(`<div class="part part-1"></div>
							<div class="part part-2"></div>
							<div class="part part-3"></div>
							<div class="part part-4"></div>
							<div class="part part-5"></div>`)

					sliderEven.append(sliderEvenInner)
					$('.slider').append(sliderEven)
				}


				if (interactionSlideData.leftPanel.type === 'video') {
					var videoUrlLeft = interactionSlideData.leftPanel.content
					var arr = videoUrlLeft.split('/');
					var videoLeftUrl = arr[2]

					console.log(videoLeftUrl)
				}
				if (interactionSlideData.slideBackgroundType === 'backgroundImage') {
					$('head').append('<style>.slider--el.anim-5parts.bg-image-' + key + ' .part:before { background-image: url(' + interactionSlideData.backgroundContent + ') }</style>');
					$('head').append('<style>.slider--el.anim-9parts.bg-image-' + key + ' .part:before { background-image: url(' + interactionSlideData.backgroundContent + ') }</style>');
					$('.bg-image-' + key).attr('aria-label', interactionSlideData.backgroundImageAltText)
				}
				else {
					$('head').append('<style>.slider--el.anim-5parts.bg-image-' + key + ' .part:before { background: ' + interactionSlideData.backgroundContent + ' }</style>');
					$('head').append('<style>.slider--el.anim-9parts.bg-image-' + key + ' .part:before { background: ' + interactionSlideData.backgroundContent + ' }</style>');

				}

				var topicListElement = $(document.createElement('li'));
				// topicListElement.click(backgroundTransition(slideNumber));
				topicListElement.attr('data-tilt', '');
				topicListElement.attr('onclick', 'slideContent(this, ' + key + ')')
				topicListElement.attr('slide_no', key);
				if (interactionSlideData.topicType === 'image' && interactionJSON.topicShape != 'Octagon') {
					topicListElement.attr('data-tilt-glare', 'true');
				}
				topicListElement.attr('data-tilt-scale', '1.2');

				// if (key === centerTopicIndex) {
				// 	topicListElement.css('z-index', '9999999');
				// }

				if (interactionJSON.topicShape === 'Circle') {
					var image = $(document.createElement('img'));
					topicListElement.attr('class', 'circle')
					if (interactionSlideData.topicType === 'image') {
						image.attr({
							'src': interactionSlideData.topicContent,
							'alt': interactionSlideData.topicSlideImageAltText
						});
					}
				}
				else if (interactionJSON.topicShape === 'Octagon') {
					if (interactionSlideData.topicType === 'image') {
						// <svg class="hexagon-img" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 100" ><defs><pattern id="img" patternUnits="userSpaceOnUse" width="100" height="100"><image xlink:href="' + interactionSlideData.topicContent + '" x="-25" width="150" height="100" /></pattern></defs><polygon class="st0" points="141.46,-0.1 58.54,-0.1 -0.1,58.54 -0.1,141.46 58.54,200.1 141.46,200.1 200.1,141.46 200.1,58.54" fill="url(#img)"/></svg>
						topicListElement.append('<svg class="hexagon-img" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg"><defs><pattern data-tilt="" data-tilt-glare="true" data-tilt-scale="1.2" id="img' + slideNumber + '" patternUnits="userSpaceOnUse" width="100" height="100"><image aria-label="' + interactionSlideData.topicSlideImageAltText + '" xlink:href="' + interactionSlideData.topicContent + '" x="-25" width="150" height="100" /></pattern></defs><polygon class="st0" points="29.91,99 1.23,70.33 1.23,29.77 29.91,1.1 70.46,1.1 99.13,29.77 99.13,70.33 70.46,99" fill="url(#img' + slideNumber + ')"/></svg>')
						// topicListElement.append('<svg class="hexagon-img" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="img" patternUnits="userSpaceOnUse" width="100" height="100"><image xlink:href="' + interactionSlideData.topicContent + '" x="-25" width="150" height="100" /></pattern></defs><polygon points="50 1 95 25 95 75 50 99 5 75 5 25" fill="url(#img)"/></svg>')
					}
					if (interactionSlideData.topicType === 'color') {
						topicListElement.append('<svg class="hexagon-img" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg"><defs></defs><polygon points="29.91,99 1.23,70.33 1.23,29.77 29.91,1.1 70.46,1.1 99.13,29.77 99.13,70.33 70.46,99" fill="' + interactionSlideData.topicContent + '"/></svg>')
					}
				}
				else if (interactionJSON.topicShape === 'Square') {
					var image = $(document.createElement('img'));
					topicListElement.attr('class', 'square')
					if (interactionSlideData.topicType === 'image') {
						image.attr({
							'src': interactionSlideData.topicContent,
							'alt': interactionSlideData.topicSlideImageAltText
						});
					}
				}
				if (interactionJSON.topicShape === 'Square' || interactionJSON.topicShape === 'Circle') {
					topicListElement.css('background', interactionSlideData.topicContent);
				}

				if (interactionJSON.topicShape === 'Square' || interactionJSON.topicShape === 'Circle') {
					var overlayDiv = $(document.createElement('div'));
					overlayDiv.attr('class', 'overlay-scrolled')
				}


				var title = $(document.createElement('h4'));
				title.html($.parseHTML(interactionSlideData.topicTitle));

				topicListElement.append(overlayDiv);
				topicListElement.append(image);
				topicListElement.append(title);
				topicListElement.attr('tabindex', '6');
				attachKeyClick(topicListElement[0]);
				$('#interactionTopicList').append(topicListElement);


				var slideWrapperDiv = $(document.createElement('div'));
				slideWrapperDiv.css('background', interactionSlideData.slideOverlayColor)
				slideWrapperDiv.attr('class', 'carousel-cell content-main-sec item');

				var innerDiv = $(document.createElement('div'));
				innerDiv.attr('class', 'inner smoothshow');

				var leftPanelDiv = $(document.createElement('div'));
				leftPanelDiv.attr('class', 'left-panel float-left');
				if (interactionSlideData.leftPanel.type === 'text') {
					leftPanelDiv.addClass('text-sec');
					var div = $(document.createElement('div'));
					div.attr('class', 'text-content-added');

					//var slideTitle = $(document.createElement('div'));
					//slideTitle.attr('class', 'slide-title');
					//slideTitle.html($.parseHTML(interactionSlideData.slideTitle));

					var slideDiscription = $(document.createElement('div'));
					slideDiscription.attr('class', 'slide-discription');
					slideDiscription.html($.parseHTML(interactionSlideData.leftPanel.content));


					//div.append(slideTitle);
					div.append(slideDiscription);
					leftPanelDiv.append(div);
				}
				else if (interactionSlideData.leftPanel.type === 'image') {
					leftPanelDiv.addClass('image-sec');
					var image = $(document.createElement('img'));
					image.attr('class', 'image-new');
					image.attr('alt', interactionSlideData.leftPanel.altText);
					image.attr('src', interactionSlideData.leftPanel.content);

					leftPanelDiv.append(image);
				}
				else if (interactionSlideData.leftPanel.type === 'video') {
					leftPanelDiv.addClass('video-sec');
					if (videoLeftUrl === 'www.youtube.com') {
						var iframe = $(document.createElement('iframe'));
						iframe.attr('class', 'existing-iframe-example youtube')
						iframe.attr('id', 'slide' + slideNumber)
						iframe.attr('width', '80%');
						iframe.attr('height', '100%');
						iframe.attr('src', interactionSlideData.leftPanel.content + '?enablejsapi=1');
						iframe.attr('frameborder', '0');
						iframe.attr('allow', 'accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture');
						iframe.attr('allowfullscreen', '');
						leftPanelDiv.append(iframe);
					}
					else if (videoLeftUrl === 'player.vimeo.com') {
						var iframe = $(document.createElement('iframe'));
						iframe.attr('class', 'existing-iframe-example vimeo')
						iframe.attr('id', 'slide' + slideNumber)
						iframe.attr('width', '80%');
						iframe.attr('height', '100%');
						iframe.attr('src', interactionSlideData.leftPanel.content);
						iframe.attr('frameborder', '0');
						iframe.attr('allow', 'accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture');
						iframe.attr('allowfullscreen', '');
						leftPanelDiv.append(iframe);
					}
					else if (interactionSlideData.leftPanel.isExternalVideo === false) {
						var video = $(document.createElement('video'));
						video.attr({
							"id": "video",
							"crossorigin": "anonymous",
							"class": "htmlVideo",
							"controls": ""
						});

						var source = $(document.createElement('source'));
						source.attr('src', interactionSlideData.leftPanel.content);
						source.attr('type', 'video/mp4');
						video.append(source);

						var track = $(document.createElement('track'));
						track.attr(
							"src",
							interactionSlideData.leftPanel.captionUrl
						);
						track.attr({
							"label": "On",
							"kind": "captions",
							"srclang": "en"
						});

						// track.attr('default', '');

						if (interactionSlideData.leftPanel.captionUrl) {
							video.append(track);
						}
						leftPanelDiv.append(video);


					}

					if (interactionSlideData.leftPanel.transcript) {
						// leftPanelDiv.append(`
						// <div class="open-transcript">
						// 	<button class="open-transcript-btn" onclick="openTranscriptPopUp(${slideNumber})" id="button${slideNumber}">Transcript</button>
						// </div>
						// `);
						$('body').append(
							` <div class="transcript-popup transcript-index${slideNumber}">
								<div class="transcript-header">
								<div class="transcript-title">Transcript</div>
								<button id="closeBtn" class="sidepanel-close-button" alt="Lukk"><svg version="1.1"
									xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
									xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" x="0px" y="0px" width="27.8px" height="31.7px"
									viewBox="0 0 27.8 31.7" enable-background="new 0 0 27.8 31.7" xml:space="preserve">
									<defs></defs>
									<line fill="none" stroke="#949494" stroke-miterlimit="10" x1="0.4" y1="0.3" x2="27.4" y2="31.3"></line>
									<line fill="none" stroke="#949494" stroke-miterlimit="10" x1="27.4" y1="0.3" x2="0.4" y2="31.3"></line>
									</svg></button>
								</div>
								<div id="transcriptBody" class="transcript-body">
								<iframe class="transcript-frame" frameborder="0" src="${interactionSlideData.leftPanel.transcript}"  width="100%"></iframe>
								</div>
							</div> `
						)
					}

				}
				leftPanelDiv.css('width', interactionSlideData.leftPanel.width);

				if (interactionSlideData.rightPanel.type === 'video') {
					var videoUrlRight = interactionSlideData.rightPanel.content
					var arrRight = videoUrlRight.split('/');
					var videoRightUrl = arrRight[2]
					console.log(videoRightUrl)
				}

				var rightPanelDiv = $(document.createElement('div'));
				rightPanelDiv.attr('class', 'right-panel float-right');
				if (interactionSlideData.rightPanel.type === 'text') {
					rightPanelDiv.addClass('text-sec');
					var div = $(document.createElement('div'));
					div.attr('class', 'text-content-added');

					//var slideTitle = $(document.createElement('div'));
					//slideTitle.attr('class', 'slide-title');
					//slideTitle.html($.parseHTML(interactionSlideData.slideTitle));

					var slideDiscription = $(document.createElement('div'));
					slideDiscription.attr('class', 'slide-discription');
					slideDiscription.html($.parseHTML(interactionSlideData.rightPanel.content));

					//div.append(slideTitle);
					div.append(slideDiscription);

					rightPanelDiv.append(div);
				}
				else if (interactionSlideData.rightPanel.type === 'image') {
					rightPanelDiv.addClass('image-sec');
					var image = $(document.createElement('img'));
					image.attr('class', 'image-new');
					image.attr('alt', interactionSlideData.rightPanel.altText);
					image.attr('src', interactionSlideData.rightPanel.content);

					rightPanelDiv.append(image);
				}
				else if (interactionSlideData.rightPanel.type === 'video') {
					rightPanelDiv.addClass('video-sec');
					if (videoRightUrl === 'www.youtube.com') {
						var iframe = $(document.createElement('iframe'));
						iframe.attr('class', 'existing-iframe-example youtube')
						iframe.attr('id', 'slide' + slideNumber)
						iframe.attr('width', '80%');
						iframe.attr('height', interactionSlideData.rightPanel.height);
						iframe.attr('src', interactionSlideData.rightPanel.content + '?enablejsapi=1');
						iframe.attr('frameborder', '0');
						iframe.attr('allow', 'accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture');
						iframe.attr('allowfullscreen', '');
						rightPanelDiv.append(iframe);
					}
					else if (videoRightUrl === 'player.vimeo.com') {
						var iframe = $(document.createElement('iframe'));
						iframe.attr('class', 'existing-iframe-example vimeo')
						iframe.attr('id', 'slide' + slideNumber)
						iframe.attr('width', '80%');
						iframe.attr('height', interactionSlideData.rightPanel.height);
						iframe.attr('src', interactionSlideData.rightPanel.content);
						iframe.attr('frameborder', '0');
						iframe.attr('allow', 'accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture');
						iframe.attr('allowfullscreen', '');
						rightPanelDiv.append(iframe);
					}
					else if (interactionSlideData.rightPanel.isExternalVideo === false) {
						var video = $(document.createElement('video'));
						video.attr({
							"id": "video",
							"crossorigin": "anonymous",
							"class": "htmlVideo",
							"controls": ""
						});

						var source = $(document.createElement('source'));
						source.attr('src', interactionSlideData.rightPanel.content);
						source.attr('type', 'video/mp4');
						video.append(source);

						var track = $(document.createElement('track'));
						track.attr(
							"src",
							interactionSlideData.rightPanel.captionUrl
						);
						track.attr({
							"label": "On",
							"kind": "captions",
							"srclang": "en"
						});
						// track.attr('default', '');
						if (interactionSlideData.rightPanel.captionUrl) {
							video.append(track);
						}

						rightPanelDiv.append(video);
					}

					if (interactionSlideData.rightPanel.transcript) {
						// rightPanelDiv.append(`
						// <div class="open-transcript">
						// 	<button class="open-transcript-btn" onclick="openTranscriptPopUp(${slideNumber})" id="button${slideNumber}">Transcript</button>
						// </div>
						// `);
						$('body').append(
							` <div class="transcript-popup transcript-index${slideNumber}">
								<div class="transcript-header">
								<div class="transcript-title">Transcript</div>
								<button id="closeBtn" class="sidepanel-close-button" alt="Lukk"><svg version="1.1"
									xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
									xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" x="0px" y="0px" width="27.8px" height="31.7px"
									viewBox="0 0 27.8 31.7" enable-background="new 0 0 27.8 31.7" xml:space="preserve">
									<defs></defs>
									<line fill="none" stroke="#949494" stroke-miterlimit="10" x1="0.4" y1="0.3" x2="27.4" y2="31.3"></line>
									<line fill="none" stroke="#949494" stroke-miterlimit="10" x1="27.4" y1="0.3" x2="0.4" y2="31.3"></line>
									</svg></button>
								</div>
								<div id="transcriptBody" class="transcript-body">
								<iframe class="transcript-frame" frameborder="0" src="${interactionSlideData.rightPanel.transcript}"  width="100%"></iframe>
								</div>
							</div> `
						)
					}
				}
				else if (interactionSlideData.rightPanel.layout === 'singleContent') {
					rightPanelDiv.hide();
					leftPanelDiv.css("margin-right", "0px");
				}

				rightPanelDiv.css('width', interactionSlideData.rightPanel.width);

				innerDiv.append(leftPanelDiv);
				if (interactionSlideData.rightPanel.layout != 'singleContent') {
					innerDiv.append(rightPanelDiv);
				}

				var clearFixDiv = $(document.createElement('div'));
				clearFixDiv.attr('class', 'clearfix');
				innerDiv.append(clearFixDiv);

				slideWrapperDiv.append(innerDiv);

				if (interactionSlideData.audioContent && interactionJSON.acrossAllAudioChecked == false) {
					var audio = $(document.createElement('audio'));
					audio.attr('id', 'start');
					audio.attr('class', 'active slider-audio');

					var source = $(document.createElement('source'));
					source.attr('src', interactionSlideData.audioContent);
					if (interactionSlideData.audioContent.toLowerCase().indexOf('.mp3') !== -1) {
						source.attr('type', 'audio/mp3');
					} else if (interactionSlideData.audioContent.toLowerCase().indexOf('.ogg') !== -1) {
						source.attr('type', 'audio/ogg');
					}

					audio.append(source);
					slideWrapperDiv.append(audio);
				}

				$('#owl-carousel').append(slideWrapperDiv);

				slideNumber = slideNumber + 1;
			});
		}
	</script>
	<script src="js/owlcarousel/owl.carousel.min.js"></script>

	<script src="js/jquery.mCustomScrollbar.js"></script>
	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.js"></script> -->
	<script type="text/javascript" src="js/tilt.jquery.min.js"></script>
	<script src="js/iframe_api.js"></script>
	<script src="js/player.js"></script>


	<script>
		// $('video').hover(function toggleControls() {
		// 	if (this.hasAttribute("controls")) {
		// 		this.removeAttribute("controls")
		// 	} else {
		// 		this.setAttribute("controls", "controls")
		// 	}
		// })

		if (interactionJSON.audioModeType === "auto") {
			var pausedNot = true;
		} else {
			var pausedNot = false;
		}

		function audioPause() {
			if ($(".interaction-audio audio")) {
				$("audio").each(function () {
					this.pause(); // Stop playing
					pausedNot = false;
				});
			} else {
				$(".interaction-audio audio").each(function () {
					this.pause();
				});
			}
			console.log(pausedNot + "pause");
		}

		function audioPlay() {
			if ($(".interaction-audio audio").length > 0) {
				$(".interaction-audio audio").each(function () {
					this.play();
				});
			} else {
				$(".owl-item.active audio").each(function () {
					this.play(); // Stop playing
					$(".owl-item audio").removeClass("paused");
				});
			}
			pausedNot = true;
			// console.log(pausedNot + "play");
		}



		$(window).on('load', function () {
			// if (interactionJSON.interactionAudio && interactionJSON.acrossAllAudioChecked == false) {
			// 	var showaudioicon = false;
			// 	if (interactionJSON.interactionData.length > 0) {
			// 		for (let i = 0; i < interactionJSON.interactionData.length; i++) {
			// 			if (interactionJSON.interactionData[i].audioContent) {
			// 				showaudioicon = true;
			// 				var audioPlayPause = $(document.createElement("div"));
			// 				audioPlayPause.css(
			// 					"background",
			// 					'url("images/speaker_on.svg") center center no-repeat'
			// 				);
			// 				$(".sound-on-off").show();
			// 				break;
			// 			} else {
			// 				$(".sound-on-off").hide();
			// 			}
			// 		}
			// 	}
			// }
			// if (!interactionJSON.interactionAudio == '' && interactionJSON.acrossAllAudioChecked === true && pausedNot == true) {
			// 	var thisAUdio = $('.interaction-audio audio')
			// 	var interactionAudio = thisAUdio.get(0).play();
			// } else if (pausedNot == true) {
			// 	var thisAUdio = $('.owl-item.active audio')
			// 	var interactionAudio = thisAUdio.get(0).play();
			// }
			var vidAll = document.getElementsByClassName('htmlVideo');
			for (var i = 0; i < vidAll.length; i++) {
				vidAll[i].onplaying = function () {
					$('.interaction-audio audio, .owl-item.active audio').each(function () {
						this.pause();
					})
				};
				vidAll[i].onpause = function () {
					if (pausedNot == true) {
						if ($('.interaction-audio audio').length > 0) {
							$('.interaction-audio audio').each(function () {
								this.play();
							})
						} else {
							$('.owl-item.active audio').each(function () {
								this.play();
							})
						}
					}
				};
			}

			// if (interactionJSON.audioModeType === 'auto') {
			// 	if (!interactionJSON.interactionAudio == "" && interactionJSON.acrossAllAudioChecked == true) {
			// 		var thisAUdio = $('.interaction-audio audio')
			// 		var interactionAudio = thisAUdio.get(0).play();
			// 	}
			// }
		});

		// Vimeo Player API
		var ifVimeo = interactionJSON.interactionData;
		var vimeoVideo = $(".vimeo");
		var vimeoPlayer = [];

		console.log("test", vimeoPlayer);

		for (var i = 0; i < vimeoVideo.length; i++) {
			if ($(vimeoVideo[i])) {
				vimeoPlayer.push(new Vimeo.Player($(vimeoVideo[i]).attr("id")));
				console.log("test", vimeoPlayer);
				vimeoPlayer[i].on("play", function () {
					if (interactionJSON.acrossAllAudioChecked === true) {
						$(".interaction-audio audio").each(function () {
							this.pause();
						});
					} else {
						$(".owl-item.active audio").each(function () {
							this.pause();
						});
					}
					for (var i = 0; i < player.length; i++) {
						player[i].pauseVideo();
					}
				});
				console.log("bottom", vimeoPlayer);
				vimeoPlayer[i].on("pause", function () {
					if (interactionJSON.acrossAllAudioChecked === true && pausedNot === true) {
						$(".interaction-audio audio").each(function () {
							this.play();
						});
					} else if (pausedNot === true) {
						$(".owl-item.active audio").each(function () {
							this.play();
						});
					}
				});
				vimeoPlayer[i].getVideoTitle().then(function (title) {
					console.log("title:", title);
				});
			}
		}

		// Youtube Player API
		// var videoUrlLeft = interactionSlideData.leftPanel.content
		// var arr = videoUrlLeft.split('/');
		// var videoLeftUrl = arr[2]
		// console.log(videoLeftUrl)

		var tag = document.createElement("script");
		tag.id = "iframe-demo";
		tag.src = "https://www.youtube.com/iframe_api";
		var firstScriptTag = document.getElementsByTagName("script")[0];
		firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

		var player = [];
		var videoYt = $("iframe.existing-iframe-example.youtube");
		function onYouTubeIframeAPIReady() {
			for (var i = 0; i < videoYt.length; i++) {
				player.push(
					new YT.Player($(videoYt[i]).attr("id"), {
						events: {
							onStateChange: onPlayerStateChange
						}
					})
				);
			}
		}

		function changeBorderColor(playerStatus) {
			if (playerStatus == -1) {
				// unstarted = gray
			} else if (playerStatus == 0) {
				// ended = yellow
			} else if (playerStatus == 1) {
				if (interactionJSON.acrossAllAudioChecked === true) {
					$(".interaction-audio audio").each(function () {
						this.pause();
					});
				} else {
					$(".owl-item.active audio").each(function () {
						this.pause();
					});
				}
				for (var i = 0; i < vimeoPlayer.length; i++) {
					vimeoPlayer[i].pause();
				}
				// playing = green
			} else if (playerStatus == 2) {
				if (interactionJSON.acrossAllAudioChecked === true && pausedNot === true) {
					$(".interaction-audio audio").each(function () {
						this.play();
					});
				} else if (pausedNot === true) {
					$(".owl-item.active audio").each(function () {
						this.play();
					});
				}
				// paused = red
			} else if (playerStatus == 3) {
				if (interactionJSON.acrossAllAudioChecked === true) {
					$(".interaction-audio audio").each(function () {
						this.pause();
					});
				} else {
					$(".owl-item.active audio").each(function () {
						this.pause();
					});
				}
				for (var i = 0; i < vimeoPlayer.length; i++) {
					vimeoPlayer[i].pause();
				}
				// buffering = purple
			} else if (playerStatus == 5) {
				// video cued = orange
			}
		}

		function onPlayerStateChange(event) {
			changeBorderColor(event.data);
		}


		if (interactionJSON.acrossAllAudioChecked == false) {
			var showaudioicon = false;
			if (interactionJSON.interactionData.length > 0) {
				for (let i = 0; i < interactionJSON.interactionData.length; i++) {
					if (interactionJSON.interactionData[i].audioContent) {
						showaudioicon = true;
						var audioPlayPause = $(document.createElement("div"));
						audioPlayPause.css(
							"background",
							'url("images/speaker_on.svg") center center no-repeat'
						);
						$(".sound-on-off").show();
						break;
					} else {
						$(".sound-on-off").hide();
					}
				}
			}
		}
		if (!interactionJSON.interactionAudio == '' && interactionJSON.acrossAllAudioChecked === true && pausedNot === true) {
			var thisAUdio = $('.interaction-audio audio')
			var interactionAudio = thisAUdio.get(0).play();
		}
	</script>

	<script>

		function scaleImageList() {
			if ($(window).width() > 1024) {
				var evenWidth = $(".nav").width() / $(".nav li").length;
				$(".nav li").css({ "width": evenWidth, 'height': evenWidth });
				// $('nav .nav li').height(evenWidth)
			} else {
				$(".nav li").css("width", '100%');
				$(".nav li").css("height", '100%');
				var owlItemWidth = $(".owl-item").width();
				$(".nav .owl-item").css({ "width": owlItemWidth, 'height': owlItemWidth });
			}
		}


		function alignSelf() {
			var txtht = $('#owl-carousel .owl-item.active .text-content-added').height();
			var imght = $('#owl-carousel .owl-item.active .image-sec').height();

			var wht = $(window).height();
			if ($('#owl-carousel .owl-item.active .left-panel').hasClass('text-sec') && $('#owl-carousel .owl-item.active .right-panel').hasClass('video-sec')) {
				if (txtht > wht) {
					$('#owl-carousel .owl-item.active .video-sec').addClass("alignSelf");
				} else {
					console.log('texthieght' + txtht, wht)
					$('#owl-carousel .owl-item.active .text-sec').addClass("alignSelf");
				}
			}
			else if ($('#owl-carousel .owl-item.active .left-panel').hasClass('video-sec') && $('#owl-carousel .owl-item.active .right-panel').hasClass('text-sec')) {
				if (txtht > wht) {
					$('#owl-carousel .owl-item.active .video-sec').addClass("alignSelf");
				} else {
					$('#owl-carousel .owl-item.active .text-sec').addClass("alignSelf");
				}
			}
			else if ($('#owl-carousel .owl-item.active .left-panel').hasClass('image-sec') && $('#owl-carousel .owl-item.active .right-panel').hasClass('text-sec')) {
				if (txtht > wht) {
					$('#owl-carousel .owl-item.active .image-sec').addClass("alignSelf");
				} else if (imght > wht) {
					$('#owl-carousel .owl-item.active .text-sec').addClass("alignSelf");
				}
			} else if ($('#owl-carousel .owl-item.active .left-panel').hasClass('text-sec') && $('#owl-carousel .owl-item.active .right-panel').hasClass('image-sec')) {
				if (txtht > wht) {
					$('#owl-carousel .owl-item.active .image-sec').addClass("alignSelf");
				} else {
					$('#owl-carousel .owl-item.active .text-sec').addClass("alignSelf");
				}
			}
		}


		function owlInitialize() {
			if ($(window).width() <= 1024) {
				$('#interactionTopicList').addClass('owl-carousel')
				$('#interactionTopicList').owlCarousel({
					loop: true,
					autoplay: false,
					// autoHeight:true,
					responsiveClass: true,
					//animateOut: 'fadeOut',
					//animateIn: 'fadeIn',
					responsive: {
						0: {
							items: 3,
							nav: false,
							dots: false,
							loop: false,
						},
						600: {
							items: 6,
							nav: false,
							dots: false,
							loop: false,
						},
						1000: {
							items: 5,
							nav: false,
							loop: false,
							dots: false
						}
					}
				})
			}
			else {
				$('#interactionTopicList').removeClass('owl-carousel')
				$('#interactionTopicList').owlCarousel('destroy');
			}
		}
		function initializeScroll() {
			if ($(document).width() >= 900) {
				$(".slide-discription").mCustomScrollbar({
					theme: "minimal-dark",
					advanced: {
						updateOnContentResize: true,
						updateOnImageLoad: true
					}
				});
			} else {
				$('.slide-discription').mCustomScrollbar("destroy");
			}
		}
		function mobileCarousal() {
			if ($(document).width() <= 1024) {
				$('.nav .owl-item').attr('onclick', 'slideContent(this)');
			}
		}

		$(document).ready(function (e) {
			owlInitialize();
			if (interactionJSON.interactionData.length <= 3) {
				$('#interactionTopicList .owl-stage').addClass('alignC');
			}
			if (this.resizeTO) clearTimeout(this.resizeTO);
			this.resizeTO = setTimeout(function () {
				$(this).trigger('resizeEnd');
			}, 500);
			mobileCarousal();
		});
		$(window).on("load", function () {
			slideOwlCarousel()
			initializeScroll()
			$('.mCustomScrollBox').removeAttr('tabindex');
		});
		$(window).resize(function () {
			initializeScroll();
			alignSelf();
			slideOwlCarousel();
			owlInitialize();
			if (interactionJSON.interactionData.length <= 3) {
				$('#interactionTopicList .owl-stage').addClass('alignC');
			}

			if (this.resizeTO) clearTimeout(this.resizeTO);
			this.resizeTO = setTimeout(function () {
				$(this).trigger('resizeEnd');
			}, 500);
			mobileCarousal();
		});

		$(window).bind('resizeEnd', function () {
			scaleImageList();
		});

		var slideList = interactionJSON.interactionData
		function slideContent(e, indexNumber) {
			$("#mcs_container").mCustomScrollbar("scrollTo", "top");
			if ($('.inner-content').hasClass('scrolled-section')) {
				$('.section3').removeClass('pb-50');
			} else {
				$('.section3').addClass('pb-50');
			}
			$('.nav li').removeClass('active');
			$('.owl-item').removeClass('selected-topic');
			if ($(window).width() <= 1024) {
				$(e).find('li').addClass('active');
				$(e).addClass('selected-topic');
			} else {
				$(e).addClass('active');
				$('.owl-item').addClass('selected-topic');
			}
			setTimeout(function () {
				$('#owl-carousel').fadeIn('slow')
				$('#owl-carousel').addClass('show')
			}, 1000)
			$('.back-to-top').fadeIn()
			$('nav .nav li').css({ transition: '0.8s' })
			$('.on-top-div').addClass('scrolled-section', { duration: 500 })
			$('.title-interaction, .intro-discription').hide()
			$('.slider-audio audio').show()
			setTimeout(function () {
				console.log(pausedNot)
				// $('audio').each(function () {
				// 	this.pause();
				// })
				if (pausedNot == true && interactionJSON.acrossAllAudioChecked == false) {
					$('.owl-item.active audio').each(function () {
						this.play();
					})
				}
				alignSelf();
				$('nav').removeClass("scrollUp");
			}, 1500)

			$('#owl-carousel').trigger('to.owl.carousel', [$(e).index(), 5000]);
			backgroundTransition(indexNumber)
		}


		function backgroundTransition(e) {
			var currentValue = e
			var valueIncrease = currentValue + 1
			var valueDecrease = currentValue - 1

			$("#page" + currentValue + "").prop('checked', true);
			$("#page" + currentValue + "").addClass('checked');
			$("#page" + valueIncrease + "").prop('checked', false);
			$("#page" + valueIncrease + "").removeClass('checked');

		}

		$('.back-to-top').click(function () {
			$('.nav li').removeClass('active');
			$('#owl-carousel .owl-item.active').removeClass('active')
			$('.owl-item').removeClass('selected-topic');
			$('.hero-slider').fadeOut();
			$('.hero-slider').removeClass('show');
			$('.on-top-div').removeClass('scrolled-section', { duration: 500 });
			// $('.title-interaction').fadeIn()
			if (interactionJSON.introDiscription) {
				setTimeout(function () {
					$("#mcs_container").mCustomScrollbar("scrollTo", "top");
				}, 100)
				$('.intro-discription').fadeIn()
				if ($('.inner-content').hasClass('scrolled-section')) {
					$('.section3').removeClass('pb-50');
				} else {
					$('.section3').addClass('pb-50');
				}
			}
			$('.owl-item').find('audio').each(function () {
				this.pause();
			});
			$('.back-to-top').fadeOut()
			$('input').prop('checked', false)
			$('input').removeClass('checked')
			$('#pagedefault').prop('checked', true)
			$('#pagedefault').addClass('checked');
			$("#mcs_container").mCustomScrollbar("scrollTo", "top");
			$('nav').removeClass("scrollUp");
			$('.title-interaction').fadeIn().removeClass("scrollUp");
			$('.intro-discription').attr('tabindex', '-1')
			$('.title-interaction').attr('tabindex', '-1')
			$('#owl-carousel .owl-item').find('img').attr('tabindex', '-1');
			$('#owl-carousel .owl-item').find('a').attr('tabindex', '-1');
			$('#owl-carousel .owl-item').find('.text-content-added').attr('tabindex', '-1');
			$('#owl-carousel .owl-item').find('.existing-iframe-example').attr('tabindex', '-1');
			$('#owl-carousel .owl-item').find('video').attr('tabindex', '-1');
		})

		function slideOwlCarousel() {
			$('#owl-carousel').trigger('refresh.owl.carousel');
			$('#owl-carousel').owlCarousel({
				loop: false,
				autoHeight: true,
				responsiveClass: true,
				// animateIn: 'fadeIn',
				// animateOut: 'fadeOut',
				mouseDrag: false,
				freeDrag: false,
				pullDrag: false,
				touchDrag: false,
				smartSpeed: 2000,
				onTranslated: sliderShow,
				onTranslate: sliderHide,
				responsive: {
					0: {
						items: 1,
						nav: false,
						dots: false,
						mouseDrag: false,
					},
					600: {
						items: 1,
						nav: false,
						dots: false,
						mouseDrag: false,
					},
					1000: {
						items: 1,
						nav: false,
						loop: false,
						dots: false,
					}
				},
			})
			function sliderHide() {
				$('#owl-carousel').hide()
				var ifYoutube = interactionJSON.interactionData;
				for (var i = 0; i < player.length; i++) {
					player[i].pauseVideo();
				}
				for (var i = 0; i < vimeoPlayer.length; i++) {
					vimeoPlayer[i].pause();
				}
				$('.owl-item').find('video').each(function () {
					this.pause();
				});
				$('.owl-item').find('audio').each(function () {
					this.pause();
				});

			}

			function sliderShow() {
				setTimeout(function () {
					alignSelf();
					//$("#mcs_container").mCustomScrollbar("scrollTo","top");
					console.log(pausedNot)
					if (pausedNot == true && $('.interaction-audio audio').length == 0) {
						$('.owl-item.active audio').each(function () {
							this.play();
						})
					}
				}, 1000)
			}
		}


		$(document).ready(function () {
			var lFollowX = 0,
				lFollowY = 0,
				x = 0,
				y = 0,
				friction = 5 / 30;

			function moveBackground() {
				x += (lFollowX - x) * friction;
				y += (lFollowY - y) * friction;

				translate = 'translate(' + x + 'px, ' + y + 'px) scale(1.1)';

				$('.medium').css({
					'-webit-transform': translate,
					'-moz-transform': translate,
					'transform': translate
				});

				window.requestAnimationFrame(moveBackground);
			}
			$(window).on('mousemove click', function (e) {

				var lMouseX = Math.max(-100, Math.min(100, $(window).width() / 2 - e.clientX));
				var lMouseY = Math.max(-100, Math.min(100, $(window).height() / 2 - e.clientY));
				lFollowX = (20 * lMouseX) / 100; // 100 : 12 = lMouxeX : lFollow
				lFollowY = (10 * lMouseY) / 100;

			});

			moveBackground();


			$('.arrow').click(function () {
				$('.nav li:first-child').addClass('active');
				$('.effects-top').show();
				$('.hide-element').show();
				$('.bottom-layer').addClass('active')
				// $('#wrapper').animate({ scrollTop: $('.section3').offset().top }, '1000');
				$("#mcs_container").mCustomScrollbar("scrollTo", "top");
				setTimeout(function () {
					$('.effects-top').fadeOut();
					$('.hide-element').fadeOut();
				}, 1000);
			})
			$('.home').click(function () {
				// $('.on-top-div').addClass('scrolled-section-top')
				// $('.on-top-div').removeClass('scrolled-section')
				// $('.effects-top').show();
				// $('.bottom-layer').addClass('active')

				// $("#page2").prop('checked', true);
				// $('html, body').animate({ scrollTop: $('.scrollmagic-pin-spacer').offset().top }, '1000');
				// setTimeout(function () {
				// 	$('.effects-top').hide();
				// }, 2000);
			})

			jQuery('.speaker-icon.speaker-on').on('click', function () {
				jQuery(this).hide();
				jQuery('.speaker-icon.speaker-off').show();
			});

			jQuery('.speaker-icon.speaker-off').on('click', function () {
				jQuery(this).hide();
				jQuery('.speaker-icon.speaker-on').show();
			});

			jQuery('.speaker-icon.speaker-on').on('keyup', function (event) {
				if (event.keyCode === 13 || event.keyCode === 32) {
					$(this).click();
					jQuery('.speaker-icon.speaker-off').focus();
					jQuery('.speaker-icon.speaker-off').removeAttr('tabindex');
					jQuery('.speaker-icon.speaker-off').attr('tabindex', '5');
				}
			});
			jQuery('.speaker-icon.speaker-off').on('keyup', function (event) {
				if (event.keyCode === 13 || event.keyCode === 32) {
					$(this).click();
					jQuery('.speaker-icon.speaker-on').focus();
					jQuery('.speaker-icon.speaker-on').removeAttr('tabindex');
					jQuery('.speaker-icon.speaker-on').attr('tabindex', '5');
				}
			});
		});

		$('.top-layer').addClass('active')

		setTimeout(function () {
			$('.hide-element').hide();
		}, 1000);
		setTimeout(function () {
			$('.effects-top').hide();
		}, 2000);

		// $(document).bind("contextmenu", function (e) {
		// 	e.preventDefault();
		// });
		// $(document).keydown(function (e) {
		// 	if (e.which === 123) {
		// 		return false;
		// 	}
		// });
		$(document).mouseup(function (e) {
			var container = $(".transcript-popup");
			if (!container.is(e.target) && container.has(e.target).length === 0) {
				container.css('right', '-100%')
			}
		});
		function openTranscriptPopUp(id) {
			$(`.transcript-popup.transcript-index${id}`).css('right', '0')
			// $(`.transcript-popup .transcript-frame`).contents().find('pre').css({
			//   'color': '#fff',
			//   'font-size': '15px',
			// });
			$(`.transcript-popup .transcript-frame`).attr('tabindex', '-1');
			$(`.transcript-popup`).find('.sidepanel-close-button').attr('tabindex', '-1');
			$(`.transcript-popup .transcript-frame`).contents().find('pre').attr('tabindex', '-1');
			$(`.transcript-popup.transcript-index${id} .transcript-frame`).attr('tabindex', '6');
			$(`.transcript-popup.transcript-index${id}`).find('.sidepanel-close-button').attr('tabindex', '7');
			$(`.transcript-popup.transcript-index${id} .transcript-frame`).contents().find('pre').attr('tabindex', '6');
			$(`.transcript-popup.transcript-index${id} .transcript-frame`).contents().find('pre').focus();
		}

		$('.sidepanel-close-button').click(function () {
			$('.transcript-popup').css('right', '-100%')
		})

		// $("#frm").contents().find("head").append("<style>.text_color{color:red;}@page{margin:0;}</style>");
		// $.get('transcript.txt', function (data) {
		// 	alert(data);
		// 	//process text file line by line
		// 	$('#transcriptBody').html(data.replace('n', ''));
		// });

		$(document).ready(function () {
			var c = 0;
			var currentScrollTop = 0;
			navbar = $('nav');
			$('#wrapper-body').mCustomScrollbar({
				theme: "dark",
				mouseWheelPixels: 20,
				scrollInertia: 20,
				// scrollInertia: 50,
				// contentTouchScroll: false,
				advanced: {
					updateOnContentResize: true
				},
				callbacks: {
					onScroll: function () {

						var a = $('#wrapper-body').find(".mCSB_dragger").position().top;
						//var b = navbar.height();
						//var a = $('#interactionBody').find(".mCSB_dragger").position().top;
						//var b = navbar.height();
						currentScrollTop = a;

						if (c < currentScrollTop) {
							navbar.addClass("scrollUp");
							$('.title-interaction').addClass("scrollUp").fadeOut();
						} else if (c > currentScrollTop) {
							navbar.removeClass("scrollUp");
							if (!$('.inner-content').hasClass('scrolled-section')) {
								$('.title-interaction').fadeIn().removeClass("scrollUp");
							}
						}
						c = currentScrollTop;
					}
				}
			});
		});




	</script>

</body>

</html>